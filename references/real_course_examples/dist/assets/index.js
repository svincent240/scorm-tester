import{i as z,g as $,e as O,a as L,b as N,c as T,d as R,r as P,f as F}from"./main.js";const W=[];function p(t,r){const a={timestamp:new Date().toISOString(),action:t,...r};W.push(a),F.emit("automation:trace",a)}function D(t,r,a){const s=[];return s.push(`=== PAGE LAYOUT DESCRIPTION ===
`),r.length>0&&(s.push("Layout Structure:"),r.forEach(c=>{c.type==="horizontal-row"?s.push(`  - Horizontal row at ${c.position} with ${c.elements.length} elements: ${c.elements.join(", ")}`):c.type==="vertical-stack"&&s.push(`  - Vertical stack of ${c.elements.length} elements: ${c.elements.join(" → ")}`)}),s.push("")),s.push("Elements (in visual order from top to bottom):"),[...t].sort((c,i)=>{const g=parseInt(c.position.split(" ")[0])||0,b=parseInt(i.position.split(" ")[0])||0;return g-b}).forEach(c=>{const i=[];if(i.push(`  • ${c.testid}`),i.push(`(${c.role})`),i.push(`- ${c.position}`),c.visualProminence!=="standard"&&i.push(`[${c.visualProminence}]`),c.size.description!=="standard"&&i.push(`${c.size.description} (${c.size.width}×${c.size.height}px)`),c.content.hasText){const g=c.content.preview.length>50?c.content.preview.substring(0,50)+"...":c.content.preview;i.push(`"${g}"`)}c.interaction.isInteractive&&i.push("(interactive)"),s.push(i.join(" "))}),a.length>0&&(s.push(`
Spatial Relationships:`),a.slice(0,10).forEach(i=>{i.type==="above"?s.push(`  - ${i.element} is ${i.gap}px above ${i.other}`):i.type==="left-of"?s.push(`  - ${i.element} is ${i.gap}px left of ${i.other}`):i.type==="contains"?s.push(`  - ${i.element} contains ${i.child}`):i.type==="aligned-horizontally"?s.push(`  - ${i.elements.join(" and ")} are horizontally aligned`):i.type==="aligned-vertically"&&s.push(`  - ${i.elements.join(" and ")} are vertically aligned`)})),s.join(`
`)}const k={listInteractions(){const r=R.getAll().map(a=>({id:a.id,type:a.type,description:a.description}));return p("listInteractions",{count:r.length}),r},getInteractionMetadata(t){const r=R.getAll().find(a=>a.id===t);if(!r)throw new Error(`SCORMAutomation: Interaction "${t}" not found on the current slide`);return p("getInteractionMetadata",{interactionId:t}),{id:r.id,type:r.type,description:r.description}},getResponse(t){const r=R.getAll().find(s=>s.id===t);if(!r||!r.instance)throw new Error(`SCORMAutomation: Interaction "${t}" not found or has no instance`);if(typeof r.instance.getResponse!="function")throw new Error(`SCORMAutomation: Interaction "${t}" does not support getResponse`);const a=r.instance.getResponse();return p("getResponse",{interactionId:t,response:a}),a},getCorrectResponse(t){if(!T.environment?.automation?.exposeCorrectAnswers)throw new Error("SCORMAutomation: getCorrectResponse requires automation.exposeCorrectAnswers=true in course config");const r=R.getAll().find(s=>s.id===t);if(!r||!r.instance)throw new Error(`SCORMAutomation: Interaction "${t}" not found or has no instance`);if(typeof r.instance.getCorrectAnswer!="function")throw new Error(`SCORMAutomation: Interaction "${t}" does not support getCorrectAnswer`);const a=r.instance.getCorrectAnswer();return p("getCorrectResponse",{interactionId:t}),a},setResponse(t,r){const a=R.getAll().find(s=>s.id===t);if(!a||!a.instance)throw new Error(`SCORMAutomation: Interaction "${t}" not found or has no instance`);if(typeof a.instance.setResponse!="function")throw new Error(`SCORMAutomation: Interaction "${t}" does not support setResponse`);try{a.instance.setResponse(r),p("setResponse",{interactionId:t,response:r})}catch(s){throw p("setResponse:error",{interactionId:t,response:r,error:s.message}),new Error(`SCORMAutomation: Failed to set response for "${t}": ${s.message}`)}},checkAnswer(t){const r=R.getAll().find(a=>a.id===t);if(!r||!r.instance)throw new Error(`SCORMAutomation: Interaction "${t}" not found or has no instance`);if(typeof r.instance.checkAnswer!="function")throw new Error(`SCORMAutomation: Interaction "${t}" does not support checkAnswer`);try{const a=r.instance.checkAnswer();p("checkAnswer",{interactionId:t,evaluation:a});const s=r.config;if(!s.controlled)try{P(s,a)}catch(A){console.warn(`[SCORMAutomation] Failed to record interaction "${t}" to SCORM: ${A.message}`)}return a}catch(a){throw p("checkAnswer:error",{interactionId:t,error:a.message}),new Error(`SCORMAutomation: Failed to check answer for "${t}": ${a.message}`)}},checkSlideAnswers(){const t=this.getCurrentSlide(),r=R.getAll();if(r.length===0)return p("checkSlideAnswers",{slideId:t,found:0,message:"No interactions found on slide"}),[];const a=[];for(const s of r)try{const A=this.checkAnswer(s.id);a.push({interactionId:s.id,type:s.type,evaluation:A})}catch(A){a.push({interactionId:s.id,type:s.type,error:A.message})}return p("checkSlideAnswers",{slideId:t,total:r.length,successful:a.filter(s=>!s.error).length,failed:a.filter(s=>s.error).length}),a},getCourseStructure(){return p("getCourseStructure",{}),T.structure},getCurrentSlide(){const t=N();return p("getCurrentSlide",{slideId:t?.id}),t?.id||null},goToSlide(t,r={}){try{L(t,r),p("goToSlide",{slideId:t,context:r})}catch(a){throw p("goToSlide:error",{slideId:t,context:r,error:a.message}),new Error(`SCORMAutomation: Failed to navigate to "${t}": ${a.message}`)}},getAutomationTrace(){return[...W]},clearAutomationTrace(){const t=W.length;W.length=0,p("clearAutomationTrace",{clearedCount:t}),console.log(`[SCORMAutomation] Cleared ${t} trace entries`)},getPageLayout(){const t=document.getElementById("slide-container");if(!t)throw new Error("SCORMAutomation: No slide container found");function r(d,h,m){let w=0;const e=m.width*m.height;w+=Math.min(e/1e4,50);const n=parseInt(h.fontSize)||16,o=parseInt(h.fontWeight)||400;w+=(n-16)*2,w+=(o-400)/100,h.backgroundColor!=="rgba(0, 0, 0, 0)"&&(w+=10),h.boxShadow!=="none"&&(w+=15);const l=parseInt(h.borderWidth)||0;return w+=l*3,m.top<window.innerHeight*.3&&(w+=10),Math.round(w)}function a(d,h=3,m=0){if(m>=h)return null;const w=d.tagName.toLowerCase(),e=d.id||null,n=d.getAttribute("data-testid")||null,o=d.getAttribute("data-interaction-id")||null,l=Array.from(d.classList),f=d.getBoundingClientRect(),u=window.getComputedStyle(d),y=e||n||o||["section","article","header","nav","main","aside","footer","h1","h2","h3","h4","h5","h6","button","input","select","textarea","img","video","audio","canvas","svg"].includes(w)||l.some(E=>E.startsWith("interaction-")||E.startsWith("slide-")||E.startsWith("assessment-"));if(!y)return null;const v=r(d,u,f),x=v>70?"primary":v>40?"secondary":v>20?"tertiary":"minor",M={tag:w,id:e,testid:n,interactionId:o,classes:l,bounds:{x:Math.round(f.x),y:Math.round(f.y),width:Math.round(f.width),height:Math.round(f.height)},visible:f.width>0&&f.height>0&&u.display!=="none"&&u.visibility!=="hidden",visualWeight:v,importance:x,depth:m};if(y&&m<h-1){const E=Array.from(d.children).map(I=>a(I,h,m+1)).filter(I=>I!==null);E.length>0&&(M.children=E)}return M}function s(d){const h=[];for(let m=0;m<d.length;m++)for(let w=m+1;w<d.length;w++){const e=d[m],n=d[w],o=e.rect,l=n.rect;Math.abs(o.top-l.top)<10&&h.push({type:"aligned-horizontally",elements:[e.testid,n.testid]}),o.bottom<=l.top+10&&h.push({type:"above",element:e.testid,other:n.testid,gap:Math.round(l.top-o.bottom)}),Math.abs(o.left-l.left)<10&&h.push({type:"aligned-vertically",elements:[e.testid,n.testid]}),o.right<=l.left+10&&h.push({type:"left-of",element:e.testid,other:n.testid,gap:Math.round(l.left-o.right)})}return h}function A(d){const h=[],m=new Map;d.forEach(({rect:n,testid:o})=>{const l=Math.round(n.top/50)*50;m.has(l)||m.set(l,[]),m.get(l).push(o)}),m.forEach((n,o)=>{n.length>=3&&h.push({type:"horizontal-row",position:`y:${o}px`,elements:n})});const w=[...d].sort((n,o)=>n.rect.top-o.rect.top);let e=[];for(let n=0;n<w.length;n++){const o=w[n],l=w[n+1];l&&Math.abs(o.rect.left-l.rect.left)<20?e.push(o.testid):(e.length>=2&&(e.push(o.testid),h.push({type:"vertical-stack",elements:e})),e=[])}return h}const c=Array.from(t.querySelectorAll("[data-testid]")).map(d=>{const h=window.getComputedStyle(d),m=d.getBoundingClientRect();return h.display!=="none"&&h.visibility!=="hidden"&&m.width>0&&m.height>0?{testid:d.getAttribute("data-testid"),element:d,tag:d.tagName.toLowerCase(),rect:m,style:h}:null}).filter(d=>d!==null),i=a(t),g=s(c),b=A(c),C=D(c,b,g),S={tree:i,viewport:{width:window.innerWidth,height:window.innerHeight},summary:{totalElements:c.length,patterns:b.length,relationships:g.length,layoutStructure:b.length>0?`Contains ${b.map(d=>d.type).join(", ")}`:"Free-form"},patterns:b,relationships:g,readableDescription:C};return p("getPageLayout",{elementCount:c.length,relationshipCount:g.length,patternCount:b.length}),S},getElementDetails(t){const r=document.querySelector(`[data-testid="${t}"]`);if(!r)throw new Error(`SCORMAutomation: Element with data-testid="${t}" not found`);const a=r.getBoundingClientRect(),s=window.getComputedStyle(r),A={display:s.display,position:s.position,top:s.top,left:s.left,right:s.right,bottom:s.bottom,width:s.width,height:s.height,margin:s.margin,padding:s.padding,fontSize:s.fontSize,fontFamily:s.fontFamily,fontWeight:s.fontWeight,lineHeight:s.lineHeight,textAlign:s.textAlign,color:s.color,backgroundColor:s.backgroundColor,visibility:s.visibility,opacity:s.opacity,overflow:s.overflow,overflowX:s.overflowX,overflowY:s.overflowY,display:s.display,flexDirection:s.flexDirection,justifyContent:s.justifyContent,alignItems:s.alignItems,gap:s.gap,zIndex:s.zIndex},c=a.width*a.height;let i=Math.min(c/1e4,50);const g=parseInt(s.fontSize)||16,b=parseInt(s.fontWeight)||400;i+=(g-16)*2+(b-400)/100,s.backgroundColor!=="rgba(0, 0, 0, 0)"&&(i+=10),s.boxShadow!=="none"&&(i+=15),i=Math.round(i);const C=i>70?"primary":i>40?"secondary":i>20?"tertiary":"minor",S=a.top<window.innerHeight*.3?"top":a.top>window.innerHeight*.7?"bottom":"middle",d=a.left<window.innerWidth*.3?"left":a.left>window.innerWidth*.7?"right":"center",h={testid:t,tag:r.tagName.toLowerCase(),id:r.id||null,classes:Array.from(r.classList),boundingBox:{x:a.x,y:a.y,width:a.width,height:a.height,top:a.top,right:a.right,bottom:a.bottom,left:a.left},computedStyle:A,visible:a.width>0&&a.height>0&&s.display!=="none"&&s.visibility!=="hidden",inViewport:a.top>=0&&a.left>=0&&a.bottom<=window.innerHeight&&a.right<=window.innerWidth,textContent:r.textContent?.trim().substring(0,100)||null,semanticPosition:`${S} ${d}`,visualWeight:i,importance:C,isInteractive:["button","a","input","select","textarea"].includes(r.tagName.toLowerCase())||r.getAttribute("role")==="button"||t.includes("button")||t.includes("nav")};return p("getElementDetails",{testid:t}),h},getLayoutFlow(){const t=document.getElementById("slide-container");if(!t)throw new Error("SCORMAutomation: No slide container found");const r=Array.from(t.querySelectorAll("[data-testid]")).map(i=>{const g=window.getComputedStyle(i),b=i.getBoundingClientRect();return g.display==="none"||g.visibility==="hidden"||b.width===0||b.height===0?null:{testid:i.getAttribute("data-testid"),element:i,tag:i.tagName.toLowerCase(),rect:b,style:g,tabIndex:i.tabIndex,isInteractive:["button","a","input","select","textarea"].includes(i.tagName.toLowerCase())}}).filter(i=>i!==null),a=[...r].sort((i,g)=>{const b=i.rect.top-g.rect.top;return Math.abs(b)>20?b:i.rect.left-g.rect.left}).map((i,g)=>({order:g+1,testid:i.testid,position:{x:Math.round(i.rect.x),y:Math.round(i.rect.y)},role:i.element.getAttribute("role")||i.tag})),s=r.filter(i=>i.tabIndex>=0||i.isInteractive).sort((i,g)=>i.tabIndex!==g.tabIndex?(i.tabIndex||0)-(g.tabIndex||0):i.element.compareDocumentPosition(g.element)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1).map((i,g)=>({tabOrder:g+1,testid:i.testid,tabIndex:i.tabIndex,canReceiveFocus:i.isInteractive||i.tabIndex>=0})),A=r.map(i=>{const g=parseInt(i.style.fontSize)||16,b=parseInt(i.style.fontWeight)||400,C=i.rect.width*i.rect.height,S=(g-16)*10+(b-400)/10+C/1e3+(i.rect.top<window.innerHeight*.3?50:0);return{testid:i.testid,prominence:Math.round(S),reason:[]}}).sort((i,g)=>g.prominence-i.prominence).slice(0,10),c={readingOrder:a,keyboardFlow:s,attentionFlow:A,analysis:{totalElements:r.length,interactiveElements:r.filter(i=>i.isInteractive).length,hasCustomTabOrder:r.some(i=>i.tabIndex>0),readingOrderMatchesTabOrder:JSON.stringify(a.map(i=>i.testid))===JSON.stringify(s.map(i=>i.testid))}};return p("getLayoutFlow",{readingOrderElements:a.length,keyboardFlowElements:s.length}),c},validatePageLayout(){const t=[],r=document.getElementById("slide-container");if(!r)return t.push({severity:"critical",category:"structure",message:"No slide container found",element:null}),t;function a(e,n,o){const[l,f,u]=[e,n,o].map(y=>(y=y/255,y<=.03928?y/12.92:Math.pow((y+.055)/1.055,2.4)));return .2126*l+.7152*f+.0722*u}function s(e,n){const o=a(...e),l=a(...n),f=Math.max(o,l),u=Math.min(o,l);return(f+.05)/(u+.05)}function A(e){const n=e.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?\)/);return n?{rgb:[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],alpha:n[4]!==void 0?parseFloat(n[4]):1}:null}function c(e){let n=e;const o=10;let l=0;for(;n&&l<o;){const f=window.getComputedStyle(n),u=A(f.backgroundColor);if(u&&u.alpha>0){if(u.alpha<1&&n.parentElement){const y=c(n.parentElement);if(y){const v=u.alpha;return{rgb:u.rgb.map((x,M)=>Math.round(x*v+y.rgb[M]*(1-v))),alpha:1}}}return u}n=n.parentElement,l++}return{rgb:[255,255,255],alpha:1}}function i(e,n){return n.overflow==="auto"||n.overflow==="scroll"||n.overflowY==="auto"||n.overflowY==="scroll"||n.overflowX==="auto"||n.overflowX==="scroll"}function g(e){const n=e.tagName.toLowerCase(),o=e.getAttribute("role"),l=e.getAttribute("data-testid")||"";return n==="button"||n==="a"||n==="input"||n==="select"||n==="textarea"||o==="button"||o==="link"||l.includes("button")||l.includes("choice")||l.includes("check")||l.includes("submit")||l.includes("nav-")}const C=Array.from(document.querySelectorAll("[data-testid]")).map(e=>{const n=window.getComputedStyle(e);return{element:e,testid:e.getAttribute("data-testid"),rect:e.getBoundingClientRect(),style:n,isVisible:n.display!=="none"&&n.visibility!=="hidden"&&n.opacity!=="0"}});C.forEach(({element:e,testid:n,rect:o,style:l,isVisible:f})=>{if(!f||o.width===0||o.height===0)return;const u=l.position==="fixed"||l.position==="absolute",y=o.right<0||o.left>window.innerWidth||o.bottom<0||o.top>window.innerHeight,v=!y&&(o.left<0||o.right>window.innerWidth||o.top<0||o.bottom>window.innerHeight);y&&!u?t.push({severity:"error",category:"layout",message:"Element is completely off-screen",element:n,bounds:{x:Math.round(o.x),y:Math.round(o.y),width:Math.round(o.width),height:Math.round(o.height)}}):v&&!u&&t.push({severity:"warning",category:"layout",message:"Element is partially off-screen",element:n,bounds:{x:Math.round(o.x),y:Math.round(o.y),width:Math.round(o.width),height:Math.round(o.height)}})});const S=document.body.scrollWidth,d=window.innerWidth;S>d+5&&t.push({severity:"warning",category:"responsive",message:`Page has horizontal overflow (${S}px content in ${d}px viewport)`,element:null,details:{contentWidth:S,viewportWidth:d}});const h=C.filter(({element:e,isVisible:n})=>n&&g(e));for(let e=0;e<h.length;e++)for(let n=e+1;n<h.length;n++){const o=h[e],l=h[n],f=o.rect,u=l.rect;if(!(f.right<=u.left||f.left>=u.right||f.bottom<=u.top||f.top>=u.bottom)){const v=parseInt(o.style.zIndex)||0,x=parseInt(l.style.zIndex)||0;v===x&&t.push({severity:"warning",category:"layout",message:"Interactive elements overlap at same z-index",elements:[o.testid,l.testid],details:{zIndex:v}})}}C.forEach(({element:e,testid:n,style:o,isVisible:l})=>{if(!l||!(e.textContent&&e.textContent.trim().length>0))return;const u=i(e,o);e.scrollHeight>e.clientHeight+2&&!u&&o.overflowY!=="hidden"&&t.push({severity:"warning",category:"content",message:"Element has vertical text overflow (content is clipped)",element:n,details:{scrollHeight:e.scrollHeight,clientHeight:e.clientHeight,overflow:o.overflow,overflowY:o.overflowY}}),e.scrollWidth>e.clientWidth+2&&!u&&o.overflowX!=="hidden"&&t.push({severity:"warning",category:"content",message:"Element has horizontal text overflow (content is clipped)",element:n,details:{scrollWidth:e.scrollWidth,clientWidth:e.clientWidth,overflow:o.overflow,overflowX:o.overflowX}})}),C.forEach(({element:e,testid:n,style:o,isVisible:l})=>{if(!l||!(e.textContent&&e.textContent.trim().length>0))return;const u=A(o.color),y=c(e);if(u&&y){const v=s(u.rgb,y.rgb),x=parseFloat(o.fontSize),M=parseInt(o.fontWeight)||400,E=x>=18||x>=14&&M>=700,I=E?3:4.5;v<I&&t.push({severity:"error",category:"accessibility",message:`Low color contrast (${v.toFixed(2)}:1, requires ${I}:1)`,element:n,details:{contrast:v.toFixed(2),required:I,textColor:o.color,backgroundColor:`rgb(${y.rgb.join(",")})`,fontSize:`${x}px`,isLargeText:E}})}}),h.forEach(({element:e,testid:n,rect:o,isVisible:l})=>{if(!l)return;const f=44;(o.width<f||o.height<f)&&t.push({severity:"warning",category:"accessibility",message:`Interactive element below minimum touch target size (${f}x${f}px)`,element:n,details:{width:Math.round(o.width),height:Math.round(o.height),minSize:f}})}),Array.from(r.querySelectorAll("img")).forEach(e=>{const n=e.getAttribute("alt"),o=e.hasAttribute("data-testid");(n===null||n==="")&&(e.getAttribute("role")==="presentation"||e.getAttribute("aria-hidden")==="true"||t.push({severity:"error",category:"accessibility",message:"Image missing alt text",element:o?e.getAttribute("data-testid"):`img[src="${e.src.substring(0,50)}..."]`,details:{src:e.src}}))}),h.forEach(({element:e,testid:n})=>{const o=e.tagName.toLowerCase(),l=e.hasAttribute("aria-label")||e.hasAttribute("aria-labelledby"),f=e.textContent&&e.textContent.trim().length>0,u=e.hasAttribute("alt"),y=e.hasAttribute("title");(o==="button"||o==="a"||e.getAttribute("role")==="button")&&!l&&!f&&!u&&!y&&t.push({severity:"error",category:"accessibility",message:"Interactive element missing accessible label",element:n,details:{tag:o}})}),C.forEach(({element:e,testid:n,style:o,isVisible:l})=>{if(!l||!g(e))return;const f=o.outlineWidth,u=o.outlineStyle;if(o.outlineColor,u==="none"&&f==="0px"){const y=o.boxShadow&&o.boxShadow!=="none",v=o.borderWidth&&parseInt(o.borderWidth)>0;!y&&!v&&t.push({severity:"warning",category:"accessibility",message:"Interactive element may lack focus indicator",element:n,details:{info:"Element has outline:none without visible alternative focus styles"}})}}),C.forEach(({testid:e,rect:n,isVisible:o})=>{o&&(n.width===0||n.height===0)&&t.push({severity:"warning",category:"layout",message:`Element has zero ${n.width===0?"width":"height"}`,element:e,bounds:{width:Math.round(n.width),height:Math.round(n.height)}})}),h.forEach(({element:e,testid:n})=>{(e.hasAttribute("disabled")||e.getAttribute("aria-disabled")==="true")&&!e.hasAttribute("aria-disabled")&&e.tagName.toLowerCase()!=="button"&&e.tagName.toLowerCase()!=="input"&&t.push({severity:"info",category:"accessibility",message:"Disabled interactive element should have aria-disabled attribute",element:n})});const w={critical:0,error:1,warning:2,info:3};return t.sort((e,n)=>w[e.severity]-w[n.severity]),p("validatePageLayout",{issuesFound:t.length,critical:t.filter(e=>e.severity==="critical").length,errors:t.filter(e=>e.severity==="error").length,warnings:t.filter(e=>e.severity==="warning").length,info:t.filter(e=>e.severity==="info").length}),t},getEngagementState(){const t=$();if(!t)throw new Error("SCORMAutomation: No active slide");const r=O.getSlideState(t);return p("getEngagementState",{slideId:t,state:r}),r},getEngagementProgress(){const t=$();if(!t)throw new Error("SCORMAutomation: No active slide");const r=O.getProgress(t);return p("getEngagementProgress",{slideId:t,progress:r}),r},markTabViewed(t){const r=$();if(!r)throw new Error("SCORMAutomation: No active slide");O.trackTabView(r,t),p("markTabViewed",{slideId:r,tabId:t})},setScrollDepth(t){const r=$();if(!r)throw new Error("SCORMAutomation: No active slide");if(typeof t!="number"||t<0||t>100)throw new Error("SCORMAutomation: Scroll depth must be a number between 0 and 100");O.trackScrollDepth(r,t),p("setScrollDepth",{slideId:r,percentage:t})},resetEngagement(){const t=$();if(!t)throw new Error("SCORMAutomation: No active slide");O.resetSlide(t),p("resetEngagement",{slideId:t})},getFlag(t){if(typeof t!="string"||t.trim()==="")throw new Error("SCORMAutomation: getFlag requires a non-empty string key");const r=z.getFlag(t);return p("getFlag",{key:t,value:r}),r},setFlag(t,r){if(typeof t!="string"||t.trim()==="")throw new Error("SCORMAutomation: setFlag requires a non-empty string key");z.setFlag(t,r),p("setFlag",{key:t,value:r})},getAllFlags(){const t=z.getAllFlags();return p("getAllFlags",{count:Object.keys(t).length}),t},removeFlag(t){if(typeof t!="string"||t.trim()==="")throw new Error("SCORMAutomation: removeFlag requires a non-empty string key");z.removeFlag(t),p("removeFlag",{key:t})},getVersion(){return{api:"1.4.0",phase:5,features:["discovery","state-access","state-mutation","evaluation","navigation","observability","ergonomic-helpers","layout-introspection","engagement-tracking","flag-management"]}}};function B(){console.log("[Automation] Initializing automation system..."),window.SCORMAutomation=k,F.on("interaction:registered",({id:t,type:r})=>{console.log(`[Automation] ✓ Registered: ${t} (${r||"unknown"})`)}),console.log("[Automation] ✓ Automation system initialized"),console.log("[Automation] window.SCORMAutomation API is now available"),console.log("[Automation] Use window.SCORMAutomation.getVersion() for feature info"),F.emit("automation:initialized",{version:k.getVersion()})}export{B as initializeAutomation};
